(ns gym.beer-xml.style-results
  (:require [clj-http.client :as http]
            [clojure.data.xml :as xml]
            [clojure.string :as cs])) ;; XML is truly the worst

(def average-marzen
  {:hops {:columbus 0.10094650115669344,
          :german-tradition 0.7811555748640343,
          :tradition 0.7445001690448604,
          :opal 0.07027717985969269,
          :crystal 0.0741814676296756,
          :styrian-celia 1.0000012770834945,
          :saaz 7.357483668286146,
          :riwaka 0.08822295971672135,
          :hallertau-mittlefruh 0.2105265846491567,
          :liberty 0.693822513467826,
          :cluster 0.1776613963034394,
          :mount-hood 2.576144592607087,
          :mt-hood 0.62004076874589,
          :german-smaragd-emerald 0.31515191762631334,
          :cascade 1.1350747096565852,
          :hallertau-blanc 0.4333338867361809,
          :spalt 1.2481754831706946,
          :moteuka 0.4622076060002865,
          :sterling 0.16324958958207283,
          :columbus-hash 0.03380787235691529,
          :hersbrucker 0.8971310698573883,
          :strisselspalt 0.09877313224115711,
          :eureka 0.0440681985918865,
          :mandarina-bavaria 0.16690830216677013,
          :nugget 0.5801166235817969,
          :southern-cross 0.024727155876558535,
          :german-traditional 0.033333375902783145,
          :nz-liberty 0.30346964030321844,
          :horizon 0.16666687951391573,
          :hellertau-mittelfruh 0.02967258705187024,
          :mosaic 0.06153854012821504,
          :tettnang 0.20000025541669889,
          :brewer-s-gold 0.15757595881315667,
          :saa 0.08923658230903357,
          :bravo 0.06666675180556629,
          :wakatu 0.004768808633336289,
          :domestic-hallertau 8.511257505087297,
          :german-hall 0.13333350361113258,
          :ahtanum-eldo-amarillo 0.18461562038464516,
          :perle 1.5118966309058162,
          :spalter-select 0.12597859653029053,
          :u-s-magnum 0.05333340144445303,
          :hallertau 1.0424622037704463,
          :styrian-goldings 0.3515012272726683,
          :german-opal 0.05263164616228917,
          :apollo 0.07692317516026881,
          :motueka 0.08345415108338507,
          :hallatauer 0.05978268504303498,
          :goldings 0.10682131338673288,
          :dr-rudi 0.0741814676296756,
          :bertwell 0.14285732529764206,
          :east-kent-goldings 0.4037098997674699,
          :hallertau-hersbrucker 6.5204167582192625,
          :b-c-goldings 0.34666710938894474,
          :hallertau-tradition 0.3498830471378057,
          :magnum 1.9795441935540363,
          :tettnanger 10.688921824506648,
          :citra 1.0354362564842938,
          :fuggles 0.9666679011807113,
          :same-mix 0.2769234305769677,
          :warrior 0.1277941731365475,
          :german-select 0.31515191762631334,
          :hallertau-mittelfruh 8.978230212986173,
          :chinook 0.23994369443987212,
          :pacific-jade 0.09050366749442357,
          :triskel 0.2105265846491567,
          :german-hallertau 0.2645164668414405,
          :northern-brewer-hallertau 0.15384635032053756,
          :centennial 0.21630203751892407,
          :northern-brewer 0.9444191850481474,
          :amarillo 0.24717980284833038,
          :hallertau-herkules 0.056221743887754146,
          :hallertau-magnun 0.31156216404463755,
          :herkules 0.08619092067059445,
          :fuggle 0.19761942976545582,
          :vanguard 0.4205133575428027,
          :galena 0.15000019156252414},
   :fermentables {:crystal-70l 0.20466090635033593,
                  :castle-chateau-monastique-abbey 0.07352933890597017,
                  :pale-2-row-toasted 0.06666660066686951,
                  :caramel-crystal-60l 4.64564061159539,
                  :chocolate-rye 0.16666650152019907,
                  :carafa-ii 0.22425177407306268,
                  :flaked-rye 0.07142850071450305,
                  :barke-munich 1.1111100111144916,
                  :aromatic 0.6712598330167856,
                  :pilsner-malt 5.220108225535622,
                  :caramunich-ii 4.076024933419665,
                  :liquid-malt-extract-extra-light 1.0999989110033468,
                  :grits 0.0666666006668695,
                  :caramel-crystal-40l 2.587184321583495,
                  :carared 0.7423501118233982,
                  :munich-light-de 0.8571420085740364,
                  :wheat-malt 0.6136193823675271,
                  :caraamber 0.19999980200060846,
                  :carafa-i 0.07178707748857516,
                  :castle-malting-munchener-malt 0.878462755923772,
                  :cane-sugar 0.3378775254877341,
                  :castle-malting-pils 0.439231377961886,
                  :caramel-crystal-75l 0.4833328548348039,
                  :caramel-crystal-malt-8l 0.040760829176135646,
                  :special-roast 0.21666645215262842,
                  :de-husked-caraf-iii 0.008633168463388793,
                  :pale-2-row 30.735033989218458,
                  :brown-sugar 0.6298043923635248,
                  :floor-malted-bohemian-pilsner 6.126962014303373,
                  :caramunich-i 4.059161138253579,
                  :dry-malt-extract-dark 0.33333300333434757,
                  :white-sorghum-syrup-gluten-free 0.266666402667478,
                  :chocolate 0.4230552953784297,
                  :munich 11.254348770959044,
                  :munich-60l 3.565472660628866,
                  :caramel-crystal-150l 0.1619643430017829,
                  :gladfield-vienna 0.37852332679358247,
                  :vienna 91.52036617775723,
                  :flaked-oats 0.2166664520203512,
                  :munich-dark 31.205679512763687,
                  :belgian-candi-syrup-d-90 0.133333201333739,
                  :barke-pilsner 0.44444400444579674,
                  :caramel-pils 1.1064856216303662,
                  :lactose-milk-sugar 0.09374990710511198,
                  :munich-malt 2.761954025904415,
                  :caramel-crystal-90l 0.11111100111144918,
                  :black-patent 0.015624984517518663,
                  :red-wheat 0.6666660066686949,
                  :midnight-wheat-malt 0.03452377531489838,
                  :biscuit 2.537679972671738,
                  :munich-dark-20l 3.983955955641193,
                  :red-x 2.594228200950201,
                  :white-wheat 0.20271774792604455,
                  :melanoidin 4.499359736179583,
                  :pale-chocolate 0.0263157634211327,
                  :belgian-candi-syrup-d-45 0.06442060210107661,
                  :victory 1.1905202997830922,
                  :weyermann-vienna 0.439231377961886,
                  :dark-munich 16.145487979174263,
                  :caraaroma 0.2922617658284228,
                  :crystal-malt-100 0.3209767762029167,
                  :aromatic-malt 1.7011609944711297,
                  :carafa-iii 0.08994700088341405,
                  :pale-wheat 0.11481311709730702,
                  :munich-light-10l 18.75051040455705,
                  :dry-malt-extract-amber 5.219994832215881,
                  :carabohemian 0.17991592981900328,
                  :roasted-barley 0.19199168659869414,
                  :carapils 1.3383525342123508,
                  :maris-otter-pale 9.07460210289688,
                  :gladfield-supernova 0.05215872613297397,
                  :carapils-copper 0.28571400285801213,
                  :sahtimallas 1.2957325649875637,
                  :weyermann-german-munich 0.24999975250076065,
                  :liquid-malt-extract-light 3.87499616376179,
                  :dry-malt-extract-wheat 0.6153840061557185,
                  :rolled-oats 0.3139375986305979,
                  :raspberry 0.8333325076009954,
                  :flaked-wheat 0.09078581798130603,
                  :bonlander-munich 3.3133075134609817,
                  :weyermann-german-pilsner 1.1764694235329913,
                  :crystal-malt-300 0.06954496817729863,
                  :carastan-30-37 0.06666660066686951,
                  :caramel-crystal-10l 0.18340596557202166,
                  :dingemans-cara-45-caramunich 0.07352933890597017,
                  :caramel-crystal-20l 2.117855046185015,
                  :carahell 0.738705077698327,
                  :cara-malt 0.27234171327150763,
                  :wheat 2.1254862609162917,
                  :carastan-light-15l 0.04166662538004977,
                  :abbey-malt 0.6956910572768271,
                  :dry-malt-extract-pilsen 3.3259226332693785,
                  :pale-ale 7.7181216100397325,
                  :dingemans-cara-20-caravienne 0.07352933890597017,
                  :flaked-barley 0.25255314678053664,
                  :dry-malt-extract-light 4.144964620647842,
                  :rye 0.896751395466336,
                  :de-husked-caraf-i 0.016666650152019905,
                  :carabrown 0.20863490453189584,
                  :liquid-malt-extract-pilsen 5.85999419861783,
                  :caramunich-iii-de 0.1428570014290061,
                  :smoked-malt 5.085036225620346,
                  :golden-promise 0.6666660066686951,
                  :dry-malt-extract-extra-light 2.619045026198445,
                  :cara-20l 0.3593930269038762,
                  :maltodextrin 0.08644506208145009,
                  :pale-ale-malt 0.5490392224523576,
                  :rice-hulls 0.3244691404096413,
                  :caramel-crystal-15l 0.13333320133373902,
                  :caramunich 2.1664205081140144,
                  :honey-malt 1.3923950180067484,
                  :floor-malted-bohemian-wheat 0.07894729026339808,
                  :weyermann-germany-munich-dark 0.5617971966309226,
                  :belgian-candi-syrup-amber-40l 0.3999996040012169,
                  :dry-malt-extract-munich 3.1999968320097363,
                  :acidulated-malt 0.5544535010248678,
                  :cara-45l 0.13333320133373902,
                  :caramel-crystal-80l 0.8777751979152651,
                  :dextrine-malt 0.07499992575022818,
                  :amber 0.5470870829947491,
                  :decoc-o 0.0556359745418389,
                  :crystal-45l 0.20535693955419626,
                  :carafoam 0.638689843888848,
                  :bohemian-pilsner 12.047752709533249,
                  :vienna-malt 5.0808501460371716,
                  :gladfield-pilsner 0.8479518619903481,
                  :liquid-malt-extract-munich 16.94093560946107,
                  :turbinado 0.19999980200060855,
                  :pilsen 1.920946679286356,
                  :caracrystal-wheat-malt 0.23843989089359527,
                  :caramunich-iii 2.750417812595761,
                  :liquid-malt-extract-amber 6.066660660685125,
                  :crystal-malt-150 0.029282091864125736,
                  :de-husked-caraf-ii 0.1604825387833919,
                  :special-b 0.9985505207339157,
                  :pilsner 117.09418996855317,
                  :de-bittered-black-malt-dingemans 0.01358694305871188,
                  :carapils-dextrine-malt 1.3611632850417517,
                  :caramel-crystal-120l 0.35952345347140346,
                  :dark-ale 0.4086366406004029,
                  :munich-light 70.91996824708296,
                  :brown-rice-syrup-gluten-free 0.19999980200060852,
                  :caravienne 0.7648792999774288,
                  :rice-syrup-solids 0.33333300333434757,
                  :crystal-60l 0.48047689795252624,
                  :gladfield-crystal-light-20l 0.013412243862764732,
                  :vienna-lme 1.0999989110033468},

   :yeasts {:safale-english-ale-yeast-s-04 8,
            :pilsner-lager-yeast-wlp800 1,
            :american-ale-1056 1,
            :san-francisco-lager-yeast-wlp810 1,
            :k-lsch-ii-2575 1,
            :bohemian-lager-2124 9,
            :thames-valley-ale-1275 1,
            :bavarian-lager-m76 5,
            :southern-german-lager-yeast-wlp838 11,
            :safale-american-ale-yeast-us-05 15,
            :safbrew-general-belgian-yeast-s-33 3,
            :saflager-german-lager-yeast-s-23 16,
            :european-lager-2247 1,
            :bavarian-weizen-yeast-wlp351 3,
            :dusseldorf-alt-yeast-wlp036 2,
            :german-ale-1007 10,
            :safale-german-ale-yeast-k-97 5,
            :californian-lager-m54 3,
            :california-ale-yeast-wlp001 1,
            :american-lager-2035 1,
            :california-lager-2112 2,
            :saflager-34-70 1,
            :czech-budejovice-lager-yeast-wlp802 1,
            :brewferm-top 1,
            :old-bavarian-lager-yeast-wlp920 2,
            :k-lsch-2565 4,
            :bohemian-lager-yeast-m84 5,
            :german-ale-ii-wlp003 2,
            :german-bock-lager-yeast-wlp833 13,
            :bayern-lager-oyl-114 2,
            :oktoberfest-m-rzen-lager-yeast-wlp820 27,
            :german-lager-yeast-wlp830 22,
            :saflager-swiss-lager-yeast-s-189 3,
            :london-ale-iii-1318 1,
            :bavarian-wheat-yeast 1,
            :flemish-ale-blend-wlp665 1,
            :munich-lager-2308 4,
            :bavarian-lager-2206 26,
            :burton-ale-yeast-wlp023 1,
            :brewferm-lager 1,
            :saflager-german-lager-yeast-w-34-70 48,
            :german-ale-k-lsch-yeast-wlp029 16,
            :isar-lager 1,
            :irish-ale-1084 1,
            :british-ale-1098 1,
            :4th-gen-wyeast-2206-saflager-w34-70 1,
            :octoberfest-lager-blend-2633 20,
            :l17-harvest 5},

   :extras {:gypsum 0.006609245326322492,
            :aa 2.939493919038784E-4,
            :hazelnut 0.029804986394817844,
            :cacl 0.0057587300842770915,
            :clarity-ferm 0.005877039564278756,
            :piloncillo-brown-sugar 0.13333320133373902,
            :sales 5.877039564278757E-4,
            :wyeast-yeast-nutrient 3.8808563484183864E-4,
            :salt-nacl 9.185918496996201E-5,
            :magnesium-chloride 0.00137788777454943,
            :oak-spiral 0.3149457770398697,
            :gyipsum 7.244265183714321E-4,
            :penzeys-cinnimon 0.10866401289777615,
            :cane-sugar 0.24999975250076067,
            :calcium-chloride 0.00965830277385561,
            :profoc 0.2607936306648698,
            :potassium-metabisulfate 0.275577554909886,
            :whirl-floc 0.3149457770398697,
            :whirlflock 3.391723752737058E-4,
            :wyeast-nutrient 7.761712696836773E-4,
            :lactic-acid-sparge 5.144114358317871E-5,
            :whirlfloc-tablet 0.3149457770398697,
            :sauergut-fo 0.07256866244587681,
            :campden-tablets 0.5878987838077567,
            :almond-extract 0.0036221325918571606,
            :smb 2.939493919038784E-4,
            :vanilla-bean 1.1757975676155135,
            :btb 4.899156531731307E-4,
            :calsium-cloride 7.244265183714321E-4,
            :clarity-ferm-total-34-bbl-batch 0.002432143545112161,
            :pumpkin-can 0.5042010198456826,
            :lactic-acid 0.004289554297380159,
            :protafloc 0.43434368835994164,
            :sauergut-mash 0.025399031856056884,
            :deltaflock 0.0016048838810145834,
            :whirlfloc 2.190989933048569,
            :gelatin-aq 0.0015234737091042252,
            :sauergut-sparge 0.012699515928028442,
            :orange-zest 0.29394939190387837,
            :ph-balancer 0.009314080431866292,
            :coriander-seed 0.004636331211819908,
            :servomyces 0.29316009101653107,
            :smoked-jalepeno 0.26666640266747804,
            :koppafloc 2.9804986361699408E-5,
            :vanilla-extract 0.0036221325918571606,
            :calcium-chloride-dihydrate 0.0029687912006238883,
            :table-salt 5.183165606034571E-4,
            :immersion-chiller 0.29394939190387837,
            :orange-peel 0.009272662423639815,
            :caco3 0.0011757975676155135,
            :5-2-ph-stabilizer 0.005835759986326997,
            :cin 0.001469746959519392,
            :wln1000 6.181774949093211E-4,
            :pumpkin-pie-spice 0.006519856302306403,
            :calcium-chloride-anhydrous 0.0012968355525171105,
            :cacl2 0.0017269508038274223,
            :chalk 6.836032369857638E-4,
            :gelatin 0.021035271871925856,
            :isinglass 0.0015454437372733026,
            :clarex 1.5454437372733028E-4,
            :whole-cloves 0.29394939190387837,
            :pumpkin 0.2794217474514244,
            :irish-moss 0.36890144677802217,
            :cherries-crushed 1.469746959519392,
            :irish-moss-rehydrated 9.818113154442159E-4,
            :gypsom 4.899156531731307E-4,
            :yeastex 8.955825238827704E-4,
            :wirlfloc 0.3391723752737058,
            :campden 0.6298915540797394,
            :fermax-yeast-nutrient 3.8808563484183864E-4,
            :firmcap 3.104685078734709E-4,
            :worflock 0.3149457770398697,
            :epsom-salt 0.003228972152280886,
            :yeast-nutrient 0.013408264042398092,
            :epsom-salts 1.8371836993992402E-4,
            :dap 0.0016951580529891513,
            :lactic-acid-mash 9.1859184969962E-4,
            :whirfloc 0.9864768414101863,
            :clarity 9.28261237591195E-4}})
